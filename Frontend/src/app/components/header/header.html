<header class="app-header">
  <div class="header-container">

    <!-- Botón toggle sidebar (mobile) -->
    <button class="sidebar-toggle" (click)="toggleSidebar.emit()">
      <i class="fa-solid fa-bars"></i>
    </button>

    <!-- Título de la página actual -->
    <div class="page-title">
      <h1>Rastreo de Rutas</h1>
      <p class="subtitle">Estado en tiempo real de vehículos y rutas</p>
    </div>

    <!-- Acciones del header -->
    <div class="header-actions">
          
      <!-- Usuario -->
      <div class="user-wrapper" *ngIf="currentUser()">
        <button class="user-button" (click)="toggleUserMenu()">
          
          <!-- ICONO DE PERFIL (NO INICIAL, NO IMAGEN) -->
          <div class="user-avatar">
            <i class="fa-regular fa-user"></i>
          </div>

          <div class="user-info">
            <span class="user-name">{{ currentUser()?.nombre }}</span>
            <span class="user-role">{{ currentUser()?.rol }}</span>  <!-- usa rol directamente -->

          </div>

          <i class="fa-solid fa-chevron-down"></i>
        </button>

        <!-- Dropdown de usuario -->
        <div class="dropdown user-dropdown" *ngIf="showUserMenu()">
          <div class="dropdown-section">
            <div class="user-profile">

              <!--ICONO GRANDE EN EL DROPDOWN -->
              <div class="user-avatar large">
                <i class="fa-regular fa-user"></i>
              </div>

              <div>
                <p> {{ currentUser()?.correo }}</p>
              </div>
            </div>
          </div>
          
          <div class="dropdown-divider"></div>
          
        <div class="dropdown-section">
          <button class="dropdown-item" (click)="goToProfile()">
            <i class="fa-solid fa-shield-halved"></i>
            <span>Política de Privacidad</span>
          </button>

          <button class="dropdown-item" (click)="goToSettings()">
            <i class="fa-solid fa-file-contract"></i>
            <span>Términos del Servicio</span>
          </button>
        </div>

          
          <div class="dropdown-divider"></div>
          
          <div class="dropdown-section">
            <button class="dropdown-item logout" (click)="logout()">
              <i class="fa-solid fa-arrow-right-from-bracket"></i>
              <span>Cerrar Sesión</span>
            </button>
          </div>
        </div>
      </div>

    </div> <!-- cierre de header-actions -->

  </div> <!-- cierre correcto de header-container -->

</header> <!-- cierre correcto de header -->

<!-- Overlay para cerrar dropdowns -->
<div 
  class="dropdown-overlay" 
  *ngIf="showUserMenu() || showNotifications()"
  (click)="showUserMenu.set(false); showNotifications.set(false)"
></div>
